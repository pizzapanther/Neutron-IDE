<!DOCTYPE html>
<html> 
  <head
    <meta charset="utf-8"/> 
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>Terminal &sdot; Neutron IDE</title>
    <link rel="shortcut icon" href="{{ STATIC_URL }}ide/img/terminal.png" />
    <link href='{{ STATIC_URL }}ide/css/terminal_black.css' rel='stylesheet' type='text/css'/>
    <style type="text/css">
      body {
        background-image: url('{{ bg }}');
      }
    </style>
  </head>
  <body>
    <div id="cursor">&nbsp;</div>
    <div id="input_wrapper">
      <div>
        <textarea name="term_input" id="term_input"></textarea>
      </div>
    </div>
    <div id="icons">
      <a href="javascript: void(0);" onclick="select_mode()">
        <img src="{{ STATIC_URL }}ide/img/term/sel.png" alt="Select Mode" title="Select Mode">
      </a>
    </div>
    <div id="terminal_wrapper">
      <div>
        <pre id="terminal"><div id="line0"><span>&nbsp;</span></div></pre>
      </div>
    </div>
    <div id="reconnect" class="hidden">
      <input type="button" name="connect" value="Start A New Terminal" onclick="return start_terminal()">
    </div>
    <script type="text/javascript" src='{{ STATIC_URL }}ide/js/jquery.js'></script>
    <script type="text/javascript" src='{{ STATIC_URL }}ide/js/term/rawinflate.js'></script>
    <script type="text/javascript" src='{{ STATIC_URL }}ide/js/common.js'></script>
    <script type="text/javascript" src='{{ STATIC_URL }}ide/js/terminal.js'></script>
    <script type="text/javascript">
      var ws;
      var cookie_name = '{{ cookie }}';
      
      function start_socket () {
        {% if request.is_secure %}
        ws = new WebSocket("wss://{{ request.get_host }}/websocket");
        {% else %}
        ws = new WebSocket("ws://{{ request.get_host }}/websocket");
        {% endif %}
        ws.onopen = wsopen;
        ws.onmessage = wsmessage;
        ws.onclose = wsclose;
      }
      
      $(window).load(function () { init_term(); start_socket(); });
    </script>
  </body>
</html>
